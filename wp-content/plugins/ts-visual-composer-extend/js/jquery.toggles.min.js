!function(e){e.fn.TSToggleSwitch=function(t){t=t||{};var r=e.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!1,animate:250,transition:"ease-in-out",checkbox:null,input:null,clicker:null,width:50,height:20,type:"compact"},t),n="select"==r.type;r.checkbox=e(r.checkbox),r.input=e(r.input),r.clicker&&(r.clicker=e(r.clicker));var i="margin-left "+r.animate+"ms "+r.transition,s={"-webkit-transition":i,"-moz-transition":i,transition:i},a={"-webkit-transition":"","-moz-transition":"",transition:""},o=function(e,t,i,o){var c=e.toggleClass("active").hasClass("active");if(o!==c){var u=e.find(".toggle-inner").css(s);if(e.find(".toggle-off").toggleClass("active"),e.find(".toggle-on").toggleClass("active"),r.checkbox.prop("checked",c).attr("checked",c),r.input.val(c),r.input.trigger("change"),!n){var l=c?0:-t+i;u.css("margin-left",l),setTimeout(function(){u.css(a),u.css("margin-left",l)},r.animate)}}};return this.each(function(){var t=e(this),i=t.height(),s=t.width();i&&s||(t.height(i=r.height),t.width(s=r.width));var a='<div class="toggle-',c=e(a+'slide">'),u=e(a+'inner">'),l=e(a+'on">'),h=e(a+'off">'),d=e(a+'blob">'),f=i/2,g=s-f;if(l.css({height:i,width:g,textAlign:"center",textIndent:n?"":-f,lineHeight:i+"px"}).html(r.text.on),h.css({height:i,width:g,marginLeft:n?"":-f,textAlign:"center",textIndent:n?"":f,lineHeight:i+"px"}).html(r.text.off).addClass("active"),d.css({height:i,width:i,marginLeft:-f}),u.css({width:2*s-i,marginLeft:n?0:-s+i}),n&&(c.addClass("toggle-select"),t.css("width",2*g),d.hide()),t.html(c.html(u.append(l,d,h))),c.on("toggle",function(e,r){e&&e.stopPropagation(),o(c,s,i),t.trigger("toggle",!r)}),t.on("toggleOn",function(){o(c,s,i,!1)}),t.on("toggleOff",function(){o(c,s,i,!0)}),r.on&&o(c,s,i),!r.click||r.clicker&&r.clicker.has(t).length||t.on("click",function(e){e.target==d[0]&&r.drag||c.trigger("toggle",c.hasClass("active"))}),r.clicker&&r.clicker.on("click",function(e){e.target==d[0]&&r.drag||c.trigger("toggle",c.hasClass("active"))}),r.drag&&!n){var p,y=(s-i)/4,j=function(e){t.off("mousemove"),c.off("mouseleave"),d.off("mouseup");var n=c.hasClass("active");return!p&&r.click&&"mouseleave"!==e.type?(c.trigger("toggle",n),void 0):(n?-y>p?c.trigger("toggle",n):u.animate({marginLeft:0},r.animate/2):p>y?c.trigger("toggle",n):u.animate({marginLeft:-s+i},r.animate/2),void 0)},Q=-s+i;d.on("mousedown",function(e){p=0,d.off("mouseup"),c.off("mouseleave");var r=e.pageX;t.on("mousemove",d,function(e){p=e.pageX-r;var t;c.hasClass("active")?(t=p,p>0&&(t=0),Q>p&&(t=Q)):(t=p+Q,0>p&&(t=Q),p>-Q&&(t=0)),u.css("margin-left",t)}),d.on("mouseup",j),c.on("mouseleave",j)})}})}}(jQuery);