!function(i){i.fn.adipoli=function(e){function t(e,t){for(var o=0;o<t.slices;o++){var a=Math.round(e.width()/t.slices);o==t.slices-1?e.children(".adipoli-after").append(i('<div class="adipoli-slice"></div>').css({left:a*o+"px",width:e.width()-a*o+"px",height:"0px",opacity:"0",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(a+o*a-a)+"px 0%"})):e.children(".adipoli-after").append(i('<div class="adipoli-slice"></div>').css({left:a*o+"px",width:a+"px",height:"0px",opacity:"0",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(a+o*a-a)+"px 0%"}))}}function o(e,t){for(var o=Math.round(e.width()/t.boxCols),a=Math.round(e.height()/t.boxRows),r=0;r<t.boxRows;r++)for(var h=0;h<t.boxCols;h++)h==t.boxCols-1?e.children(".adipoli-after").append(i('<div class="adipoli-box"></div>').css({opacity:0,left:o*h+"px",top:a*r+"px",width:e.width()-o*h+"px",height:a+"px",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(o+h*o-o)+"px -"+(a+r*a-a)+"px"})):e.children(".adipoli-after").append(i('<div class="adipoli-box"></div>').css({opacity:0,left:o*h+"px",top:a*r+"px",width:o+"px",height:a+"px",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(o+h*o-o)+"px -"+(a+r*a-a)+"px"}))}function a(i){for(var e,t,o=i.length;o;e=parseInt(Math.random()*o),t=i[--o],i[o]=i[e],i[e]=t);return i}function r(i){var e=document.createElement("canvas"),t=e.getContext("2d"),o=new Image;o.src=i,e.width=o.width,e.height=o.height,t.drawImage(o,0,0);for(var a=t.getImageData(0,0,e.width,e.height),r=0;r<a.height;r++)for(var h=0;h<a.width;h++){var s=4*r*a.width+4*h,c=(a.data[s]+a.data[s+1]+a.data[s+2])/3;a.data[s]=c,a.data[s+1]=c,a.data[s+2]=c}return t.putImageData(a,0,0,0,0,a.width,a.height),e.toDataURL()}var h=i.extend({startEffect:"transparent",hoverEffect:"normal",triggerEffect:"hover",imageOpacity:.5,animSpeed:300,fillColor:"#000",textColor:"#fff",overlayText:"",slices:10,boxCols:5,boxRows:3,popOutMargin:10,popOutShadow:10},e);return i(this).one("load",function(){if(i(this).wrap(function(){return'<div class="adipoli-wrapper '+i(this).attr("class")+'" style="width:'+i(this).width()+"px; height:"+i(this).height()+'px;"/>'}),i(this).parent().append('<div class="adipoli-before '+i(this).attr("class")+'" style="display:none;width:'+i(this).width()+"px; height:"+i(this).height()+'px;"><img src="'+i(this).attr("src")+'"/></div>'),i(this).parent().append('<div class="adipoli-after '+i(this).attr("class")+'" style="display:none;width:'+i(this).width()+"px; height:"+i(this).height()+'px;"></div>'),"transparent"==h.startEffect)i(this).hide(),i(this).siblings(".adipoli-before").css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*h.imageOpacity+')"',filter:"alpha(opacity="+100*h.imageOpacity+")","-moz-opacity":h.imageOpacity,"-khtml-opacity":h.imageOpacity,opacity:h.imageOpacity}).show();else if("grayscale"==h.startEffect){var e=i(this);e.hide(),e.siblings(".adipoli-before").show(),e.siblings(".adipoli-before").children("img").each(function(){this.src=r(this.src)})}else"normal"==h.startEffect?(i(this).hide(),i(this).siblings(".adipoli-before").show()):"overlay"==h.startEffect&&(e=i(this),e.hide(),i(this).siblings(".adipoli-before").html(h.overlayText).css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*h.imageOpacity+')"',filter:"alpha(opacity="+100*h.imageOpacity+")","-moz-opacity":h.imageOpacity,"-khtml-opacity":h.imageOpacity,opacity:h.imageOpacity,background:h.fillColor,color:h.textColor}).fadeIn(),e.show());i(this).parent().bind("mouseenter",function(){if("normal"==h.hoverEffect){var e=i(this);e.children(".adipoli-after").html('<img src="'+e.children("img").attr("src")+'"/>').fadeIn(h.animSpeed)}else if("popout"==h.hoverEffect){e=i(this);var r=e.children("img").width(),s=e.children("img").height();e.children(".adipoli-after").html('<img src="'+e.children("img").attr("src")+'"/>');var c=e.children(".adipoli-after").children("img");c.width(r+2*h.popOutMargin),c.height(s+2*h.popOutMargin),e.children(".adipoli-after").width(r+2*h.popOutMargin),e.children(".adipoli-after").height(s+2*h.popOutMargin),e.children(".adipoli-after").css({left:"-"+h.popOutMargin+"px",top:"-"+h.popOutMargin+"px","box-shadow":"0px 0px "+h.popOutShadow+"px #000"}).show()}else if("sliceDown"==h.hoverEffect||"sliceDownLeft"==h.hoverEffect||"sliceUp"==h.hoverEffect||"sliceUpLeft"==h.hoverEffect||"sliceUpRandom"==h.hoverEffect||"sliceDownRandom"==h.hoverEffect){i(this).children(".adipoli-after").show(),t(i(this),h);var n=0,p=0,f=i(".adipoli-slice",i(this));("sliceDownLeft"==h.hoverEffect||"sliceUpLeft"==h.hoverEffect)&&(f=i(".adipoli-slice",i(this))._reverse()),("sliceUpRandom"==h.hoverEffect||"sliceDownRandom"==h.hoverEffect)&&(f=a(i(".adipoli-slice",i(this)))),f.each(function(){var e=i(this);"sliceDown"==h.hoverEffect||"sliceDownLeft"==h.hoverEffect?e.css({top:"0px"}):("sliceUp"==h.hoverEffect||"sliceUpLeft"==h.hoverEffect)&&e.css({bottom:"0px"}),p==h.slices-1?setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed)},100+n),n+=50,p++})}else if("sliceUpDown"==h.hoverEffect||"sliceUpDownLeft"==h.hoverEffect){i(this).children(".adipoli-after").show(),t(i(this),h),n=0,p=0;var l=0;f=i(".adipoli-slice",i(this)),"sliceUpDownLeft"==h.hoverEffect&&(f=i(".adipoli-slice",i(this))._reverse()),f.each(function(){var e=i(this);0==p?(e.css("top","0px"),p++):(e.css("bottom","0px"),p=0),l==h.slices-1?setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed)},100+n),n+=50,l++})}else if("fold"==h.hoverEffect||"foldLeft"==h.hoverEffect)i(this).children(".adipoli-after").show(),e=i(this),t(e,h),n=0,p=0,f=i(".adipoli-slice",e),"foldLeft"==h.hoverEffect&&(f=i(".adipoli-slice",i(this))._reverse()),f.each(function(){var e=i(this),t=e.width();e.css({top:"0px",height:"100%",width:"0px"}),p==h.slices-1?setTimeout(function(){e.animate({width:t,opacity:"1.0"},h.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({width:t,opacity:"1.0"},h.animSpeed)},100+n),n+=50,p++});else if("boxRandom"==h.hoverEffect){i(this).children(".adipoli-after").show(),e=i(this),o(e,h);var d=h.boxCols*h.boxRows;p=0,n=0;var m=a(i(".adipoli-box",e));m.each(function(){var e=i(this);p==d-1?setTimeout(function(){e.animate({opacity:"1"},h.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({opacity:"1"},h.animSpeed)},100+n),n+=20,p++})}else if("boxRain"==h.hoverEffect||"boxRainReverse"==h.hoverEffect||"boxRainGrow"==h.hoverEffect||"boxRainGrowReverse"==h.hoverEffect){i(this).children(".adipoli-after").show(),e=i(this),o(e,h),d=h.boxCols*h.boxRows,p=0,n=0;var v=0,g=0,u=new Array;u[v]=new Array,m=i(".adipoli-box",e),("boxRainReverse"==h.hoverEffect||"boxRainGrowReverse"==h.hoverEffect)&&(m=i(".adipoli-box",e)._reverse()),m.each(function(){u[v][g]=i(this),g++,g==h.boxCols&&(v++,g=0,u[v]=new Array)});for(var x=0;x<2*h.boxCols;x++){for(var w=x,b=0;b<h.boxRows;b++)w>=0&&w<h.boxCols&&(function(e,t,o,a,r){var s=i(u[e][t]),c=s.width(),n=s.height();("boxRainGrow"==h.hoverEffect||"boxRainGrowReverse"==h.hoverEffect)&&s.width(0).height(0),a==r-1?setTimeout(function(){s.animate({opacity:"1",width:c,height:n},h.animSpeed/1.3,"",function(){})},100+o):setTimeout(function(){s.animate({opacity:"1",width:c,height:n},h.animSpeed/1.3)},100+o)}(b,w,n,p,d),p++),w--;n+=100}}}),i(this).parent().bind("mouseleave",function(){i(this).children(".adipoli-after").html("").hide()})}).each(function(){this.complete&&i(this).load()}),i(this)},i.fn._reverse=[].reverse}(jQuery);